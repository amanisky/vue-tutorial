# 02、基础特性

### 前言
+ 无论前端框架如何变化，它需要处理的事情依旧是**模板渲染**、**事件绑定**、**处理用户交互（输入信息或鼠标操作）**，只不过提供了不同的写法和理念

### 实例
![ViewModel](01.png)
+ 通过 new Vue({ ... }) 创建 Vue 实例；传入一个选项对象，包含数据、模板、挂载元素、方法、生命周期钩子等选项
+ 一个 Vue 实例相当于一个 MVVM 模式中的 ViewModel；如上图所示
+ 

### 选项

##### el 
+ 类型为字符串
+ DOM 元素或函数
+ 其作用是为实例提供挂载元素

##### template 
+ 类型为字符串
+ 默认会将 template 值替换挂载元素（即 el 值对应的元素）
+ 注意：组件模板需要有一个根元素

##### data 
+ 定义数据
+ 注意：必须是一个函数，并且返回值是原始对象
+ 注意：data 中的属性和 props 中的不能重名
+ 注意：只有初始化时传入的对象才是响应式的
+ 需要在实例化之后加入响应式变量，需要调用实例 $set 方法
+ 提示：应尽量在初始化的时候，把所有的变量都设定好，如果没有值，也可以用 undefined 或 null 占位

##### props
+ 获取数据
+ 提示：需要在初始化时预设好

##### methods
+ 定义方法
+ 使用 v-on 指令来监听 DOM 事件并指定方法

##### computed
+ 计算属性：展示的数据往往需要经过一些处理
+ 提供的函数将用作属性的 getter 函数
+ 计算属性的 setter 方法，则在更新属性时带来便利；
  + 例如：在处理商品价格的时候，后端往往会把价钱定义成以分为单位的整型，避免在处理浮点类型数据时产生的问题。而前端则需要把价钱再转成元进行展示，而且如果需要对价钱进行修改的话，则又要把输入的价格再恢复到分传给后端，很是繁琐。
+ 避免在模板中加入过重的业务逻辑，保证模板的结构清晰和可维护性
```
computed : {
  price : {
    // 分
　　set : function(newValue) {
　　　this.cents = newValue * 100;
　　},
    // 元
　　get : function() {
　　　return (this.cents / 100).toFixed(2);
　　}
　}
}
```

### 生命周期
+ Vue 实例在创建时有一系列的初始化步骤，例如：建立数据观察，编译模板，创建数据绑定等
+ 在此过程中，可以通过一些定义好的生命周期钩子函数来运行业务逻辑

##### beforeCreate
+ 在实例开始初始化时同步调用
+ 此时数据观测、事件等都尚未初始化
+ 可以通过 localStorage/cookie 来判断用户是否登录

##### created
+ 在实例创建之后调用
+ 此时已完成数据绑定、事件方法；即：可访问观测数据和方法
+ 但尚未开始 DOM 编译，即未挂载到文档(document)中；即：无法访问 $el
+ 可发送 ajax 请求获取数据

##### beforeMount
+ 编译模板并由 Vue 更新虚拟 DOM 之后调用该方法
+ 不保证 $el 已插入文档
+ 如果要操作 DOM，需要通过实例的 $nextTick 方法

##### mounted
+ 在编译结束时调用
+ 此时所有指令已生效，数据变化已能触发 DOM 更新
+ 可以访问模板（this.$el）以及操作 DOM
+ 最常用是：获取组件的数据和修改 DOM，通常用于集成非 Vue 库或插件

##### beforeDestroy
+ 在开始销毁实例时调用
+ 此刻实例仍然有效

##### destroyed
+ 在实例被销毁之后调用
+ 此时所有绑定和实例指令都已经解绑，子实例也被销毁

##### beforeUpdate
+ 在实例挂载之后，再次更新实例时会调用该方法
+ 此时尚未更新 DOM 结构
+ 允许在组件呈现之前获取组件上任何观测数据的新状态

##### updated
+ 在实例挂载之后，再次更新实例并更新完 DOM 结构后调用
+ 对于调试很有用
+ 注意：不要使用更新方法来更改状态，computed 和 watch 最适合

##### activated
+ 需要配合动态组件 keep-live 属性使用
+ 在动态组件初始化渲染的过程中调用该方法
+ 可以清理事件、定时器

##### deactivated
+ 需要配合动态组件 keep-live 属性使用
+ 在动态组件移出的过程中调用该方法
+ 可用于通知远程服务器组件已被销毁

### 数据绑定
+ vue 作为数据驱动视图的框架
+ 如何将数据在视图中展示出来？
  + 传统的 Web 项目中，这一过程往往是通过后端模板引擎来进行数据和视图的渲染，例如：PHP 的 smarty；但这样导致的情况是前后端语法会交杂在一起，前端 HTML 文件中需要包含后端模板引擎的语法，而且渲染完成后如果需要再次修改视图，就只能通过获取 DOM 的方法进行修改，并手动维持数据和视图的一致
  + Vue 的核心是一个响应式的数据绑定系统，建立绑定后，DOM 将和数据保持同步，这样就无需手动维护 DOM，使代码能够更加简洁易懂、提升效率

##### 数据绑定语法
+ 文本插值：使用的是双大括号标签 {{ color }}，为"Mustache"语法（源自前端模板引擎Mustache.js）
+ 绑定表达式：{{ index == 0 ? 'a' : 'b'}}
+ 属性绑定：v-bind:id="uid" 可简写为 :id="uid"
+ 过滤器：表达式后添加可选的过滤器，以管道符"|"指示；
  + 可以串联：{{ name | filterA | filterB }}
  + 可以接收参数：{{ message | filterA('wahaha', arg2) }}
+ 指令：可以理解为当表达式的值发生改变时，会有些特殊行为作用到绑定的 DOM 上；指令通常会直接书写在模板的 HTML 元素中，而为了有别于普通的属性，指令是带有前缀的 v- 的属性；写法上来说，指令的值限定为绑定表达式，因此绑定表达式及过滤器规则在这里也适用

### 表单控件
+ v-model 指令对表单元素进行双向数据绑定，在修改表单元素值的同时，实例中对应的属性值也同时更新，反之亦然

# 2.2.4