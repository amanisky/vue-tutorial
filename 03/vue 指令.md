# 03、指令

### 前言
+ 指令主要提供了一种机制将数据的变化映射为 DOM 行为
+ 什么是数据的变化映射为 DOM 行为？
  + vue 是通过数据驱动的，不能直接去修改 DOM 结构
  + 当数据变化时，指令会一句设定好的操作对 DOM 进行修改，这样就可以只关注数据的变化，而不用去管理 DOM 的变化和状态，使逻辑更加清晰，可维护性更好
+ vue 提供了大量的内置指令来进行对 DOM 的操作，也可以开发自定义指令

### v-bind
+ 主要用于动态绑定 DOM 元素属性，即元素属性实际的值由 vm 实例中的 data 属性提供的
+ .camel 修饰符
  + 将绑定的特性名称转回驼峰命名；只能用于普通 HTML 属性绑定，通常用于 svg 标签下的属性
```
<svg :view-box.camel="viewBoxSize"></svg> 输出结果如下：
<svg viewBox="xxx"></svg>
```

### v-model
+ 指令主要用于 input、select、textarea 标签中

### v-if、v-show、v-else
+ v-if 在条件为 false 的情况下不进行模板编译
+ v-show 则会在模板编译好之后将元素隐藏掉
+ v-if 切换消耗要比 v-show 高
+ v-if 初始渲染要比 v-show 高

### v-for
+ 主要用于列表渲染

### v-on
+ 主要用于事件绑定

### v-text
+ 参数类型为 string，作用是更新元素的 textContent
+ 能避免未编译前的闪现问题

### v-html
+ 参数类型为 string，作用是更新元素的 innerHtml，接收的字符串不会继续宁编译等操作，按普通 HTML 处理
+ 能避免未编译前的闪现问题

### v-ref
+ ref 被用来给元素或子组件注册引用信息
+ 引用信息将会注册在父组件的 $refs 对象上
+ 如果在普通的 DOM 元素上使用，引用指向的就是 DOM 元素
+ 如果用在子组件上，引用就指向组件实例
+ 由于 HMTL 不区分大小写，在v-ref 中如果使用了驼峰式命名，系统会自动转成小写。但可以使用"-"来连接你期望大写的字母

### v-pre
+ 跳过这个元素和它的子元素的编译过程
+ 可以用来显示原始 Mustache 标签
+ 用来减少编译时间

### v-cloak
+ 相当于在元素上添加了一个[v-cloak] 的属性，直到关联的实例结束编译
+ 和 CSS 规则如 [v-cloak] { display: none } 一起用时，这个指令可以隐藏未编译的 Mustache 标签直到实例准备完毕

### v-once
+ 用于标明元素或组件只渲染一次，即使随后发生绑定数据的变化或更新，该元素或组件及包含的子元素都不会再次被编译和渲染
+ 可以用于优化更新性能

### 自定义指令
+ 自定义指令以便封装对 DOM 元素的重的处理行为，提高代码复用率

### 注册指令
+ 通过 Vue 的 directive(id, definition) 方法注册全局自定义指令
  + id 是指令的唯一标识符
  + definition 定义对象则是指令的相关属性及钩子函数
+ 通过在组件的 directives 选项注册局部的自定义指令，该指令只能在当前组件内调用

### 指令的定义对象
+ bind 只被调用一次，在指令第一次绑定到元素上时调用，在这里可以进行一次性的初始化设置
+ inserted 被绑定元素插入父节点时调用，仅保证父节点存在，但不一定已被插入文档中
+ update 指令在 bind 之后以初始值为参数进行第一次调用，之后每次当绑定值发生变化时调用， update 接收到的参数为 newValue 和 oldValue，可以通过比较更新前后的值来忽略不必要的模板更新；所在组件的 VNode 更新时调用，**但是可能发生在其子 VNode 更新之前**
+ componentUpdated 指令所在组件的 VNode 及其子 VNode 全部更新后调用
+ unbind 只被调用一次，指令从元素上解绑时调用
